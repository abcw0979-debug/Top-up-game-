<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>á›áŸ†á á¼áš Top Up á–áŸá‰á›áŸá‰</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* CSS Rung: ášá…á“á¶á”á‘ášá½á˜ á“á·á„ Mobile First */
        body { font-family: sans-serif; margin: 0; padding: 0; background-color: #f4f4f9; color: #333; }
        header { background-color: #1a1a2e; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .logo { font-size: 1.5em; font-weight: bold; }
        main { padding: 20px; text-align: center; }
        footer { text-align: center; padding: 15px; background-color: #333; color: white; font-size: 0.8em; margin-top: 30px; }
        .login-btn { text-decoration: none; color: #ffd700; border: 1px solid #ffd700; padding: 5px 10px; border-radius: 5px; font-size: 0.9em; }
        h1 { font-size: 1.5em; margin-bottom: 25px; color: #1a1a2e; }

        /* General Containers */
        .page-section { display: none; }
        .page-container { max-width: 600px; margin: 0 auto; padding: 20px; background-color: white; border-radius: 12px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); }

        /* Login & Game Styles (ášá€áŸ’áŸá¶á‘á»á€áŠá¼á…áŠá¾á˜) */
        .login-container { max-width: 350px; margin: 50px auto; padding: 25px; }
        .social-login-btn { display: flex; align-items: center; justify-content: center; padding: 12px; margin: 15px 0; border: none; border-radius: 8px; font-size: 1.1em; text-decoration: none; color: white; cursor: pointer; }
        .facebook-btn { background-color: #3b5998; }
        .google-btn { background-color: #db4437; }
        .form-divider { margin: 20px 0; display: flex; align-items: center; text-align: center; color: #aaa; }
        .form-divider::before, .form-divider::after { content: ''; flex: 1; border-bottom: 1px solid #eee; }
        .input-group input { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .login-submit-btn { width: 100%; padding: 12px; background-color: #28a745; color: white; border: none; border-radius: 8px; font-size: 1.1em; cursor: pointer; }
        .game-list { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px auto; }
        .game-card { background-color: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); text-decoration: none; color: #333; cursor: pointer; }
        .game-card img { width: 100%; max-width: 120px; height: auto; border-radius: 8px; margin-bottom: 10px; }
        .game-card h2 { font-size: 1em; margin: 0; }
        .input-group { margin-bottom: 20px; text-align: left; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 5px; color: #1a1a2e; }
        .input-group input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .item-selection { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
        .item-card { background-color: white; border: 2px solid transparent; border-radius: 10px; padding: 15px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); cursor: pointer;}
        .item-card:has(input[type="radio"]:checked) { border-color: #28a745; background-color: #d4edda; }
        .item-card input[type="radio"] { display: none; }
        .diamond-count { display: block; font-size: 1.5em; font-weight: bold; color: #8a2be2; }
        .price { display: block; font-size: 0.9em; margin-top: 5px; color: #333; }
        .proceed-btn { width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 8px; font-size: 1.2em; margin-top: 30px; cursor: pointer; }

        /* Payment Styles */
        .order-summary { background-color: #f0f8ff; padding: 15px; border-radius: 8px; margin-bottom: 25px; border-left: 5px solid #007bff; text-align: left; }
        .order-summary p { margin: 5px 0; }
        .total-price { font-size: 1.5em; font-weight: bold; color: #dc3545; margin-top: 10px; }
        .payment-option-card { border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 8px; display: flex; align-items: center; cursor: pointer; }
        .payment-logo { width: 50px; height: 30px; object-fit: contain; margin-left: auto; }
        
        /* QR Code Container Styles */
        .qr-display {
            display: none; /* á›á¶á€áŸ‹ášá á¼ááŠá›áŸ‹á…á»á…á‡áŸ’ášá¾áŸášá¾áŸ */
            text-align: center;
            padding: 20px;
            border: 1px dashed #ccc;
            border-radius: 10px;
            margin-top: 20px;
        }
        .qr-display img {
            width: 100%;
            max-width: 300px;
            height: auto;
            border-radius: 5px;
            margin: 10px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .qr-instruction {
            background-color: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 0.9em;
        }
        .qr-confirm-btn {
            background-color: #28a745;
            color: white;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            width: 100%;
            margin-top: 15px;
            cursor: pointer;
        }
    </style>
</head>
<body onload="showPage('login-page')"> 
    <header>
        <div class="logo">GAMING TOP-UP</div>
        <div class="user-info">
            <a href="#" onclick="showPage('login-page'); return false;" class="login-btn">
                <span id="header-user-status">ğŸ” á…á¼á›á”áŸ’ášá¾á”áŸ’ášá¶áŸáŸ‹</span>
            </a>
        </div>
    </header>

    <main>
        
        <section id="login-page" class="page-section">
            <div class="login-container">
                <h2>ğŸ” áŸá¼á˜á…á¼á›á”áŸ’ášá¾á”áŸ’ášá¶áŸáŸ‹</h2>
                <a href="#" onclick="showSocialLoginForm('Google'); return false;" class="social-login-btn google-btn">
                    <i class="fab fa-google"></i> á…á¼á›áá¶á˜ Gmail
                </a>
                <a href="#" onclick="showSocialLoginForm('Facebook'); return false;" class="social-login-btn facebook-btn">
                    <i class="fab fa-facebook-f"></i> á…á¼á›áá¶á˜ Facebook
                </a>
                <div class="form-divider">á¬ á”áŸ’ášá¾á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘</div>
                <form onsubmit="completeLogin('Phone'); return false;">
                    <div class="input-group"><input type="tel" placeholder="á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘" required></div>
                    <div class="input-group"><input type="password" placeholder="á–á¶á€áŸ’á™áŸá˜áŸ’á„á¶ááŸ‹ (Password)" required></div>
                    <button type="submit" class="login-submit-btn">á…á¼á›á”áŸ’ášá¾á”áŸ’ášá¶áŸáŸ‹</button>
                </form>
            </div>
        </section>

        <section id="social-login-form-page" class="page-section">
            <div class="login-container">
                <h2 id="social-login-title">ğŸ”‘ á”áŸ†á–áŸá‰á‚áá“á¸</h2>
                <form onsubmit="completeLogin('Social'); return false;">
                    <div class="input-group">
                        <label for="social_email" id="social-label">Email / á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘</label>
                        <input type="text" id="social_email" placeholder="Email á¬ á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘" required>
                    </div>
                    <div class="input-group">
                        <label for="social_password">á–á¶á€áŸ’á™áŸá˜áŸ’á„á¶ááŸ‹ (Password)</label>
                        <input type="password" id="social_password" placeholder="á–á¶á€áŸ’á™áŸá˜áŸ’á„á¶ááŸ‹" required>
                    </div>
                    <button type="submit" class="login-submit-btn">á…á¼á›á”áŸ’ášá¾á”áŸ’ášá¶áŸáŸ‹</button>
                    <p style="margin-top: 15px;"><a href="#" onclick="showPage('login-page'); return false;">ááŸ’ášá¡á”áŸ‹á€áŸ’ášáŸ„á™</a></p>
                </form>
            </div>
        </section>


        <section id="game-selection-page" class="page-section">
            <div class="page-container">
                <h1>ğŸ® á‡áŸ’ášá¾áŸášá¾áŸá áŸ’á‚áŸá˜áŠá¾á˜áŸ’á”á¸á”á‰áŸ’á…á¼á›</h1>
                <div class="game-list">
                    <div class="game-card" onclick="selectGame('Mobile Legends', 'MLBB')"><img src="https://via.placeholder.com/150/0000FF/FFFFFF?text=MLBB" alt="Mobile Legends Logo"><h2>Mobile Legends</h2></div>
                    <div class="game-card" onclick="selectGame('PUBG Mobile', 'PUBG')"><img src="https://via.placeholder.com/150/FFA500/FFFFFF?text=PUBG" alt="PUBG Logo"><h2>PUBG Mobile</h2></div>
                    <div class="game-card" onclick="selectGame('Free Fire', 'FF')"><img src="https://via.placeholder.com/150/FF4500/FFFFFF?text=FF" alt="Free Fire Logo"><h2>Free Fire</h2></div>
                    <div class="game-card" onclick="selectGame('Honor of Kings', 'HOK')"><img src="https://via.placeholder.com/150/008000/FFFFFF?text=HOK" alt="Honor of Kings Logo"><h2>Honor of Kings</h2></div>
                    <div class="game-card" onclick="selectGame('8 Ball Pool', '8BP')"><img src="https://via.placeholder.com/150/36454F/FFFFFF?text=8BP" alt="8 Ball Pool Logo"><h2>8 Ball Pool</h2></div>
                </div>
            </div>
        </section>

        <section id="topup-page" class="page-section">
            <div class="page-container">
                <h1 id="topup-title">ğŸ’ á”á‰áŸ’á…á¼á›áŸá˜áŸ’ášá¶á”áŸ‹ Mobile Legends</h1>

                <form onsubmit="proceedToPayment(); return false;"> 
                    <h2>1. á”á‰áŸ’á‡á¶á€áŸ‹ ID á áŸ’á‚áŸá˜</h2>
                    <div class="input-group">
                        <label for="player_id" id="id-label">Player ID á“á·á„ Zone ID:</label>
                        <input type="text" id="player_id" name="player_id" placeholder="áŸá¼á˜á”á‰áŸ’á…á¼á› ID á áŸ’á‚áŸá˜ášá”áŸáŸ‹á¢áŸ’á“á€" required>
                    </div>
                    <div class="input-group" id="zone-id-group" style="display: block;">
                        <label for="zone_id">Zone ID (áŸá˜áŸ’ášá¶á”áŸ‹ MLBB):</label>
                        <input type="text" id="zone_id" name="zone_id" placeholder="á”á‰áŸ’á…á¼á›á›áŸá Zone ID" required>
                    </div>

                    <h2>2. á‡áŸ’ášá¾áŸášá¾áŸá…áŸ†á“á½á“ <span id="currency-label">á–áŸá‡áŸ’áš</span></h2>
                    <div class="item-selection" id="item-selection-options">
                        </div>

                    <button type="submit" class="proceed-btn">á”á“áŸ’áá‘áŸ…á€á¶á“áŸ‹á€á¶ášá”á„áŸ‹á”áŸ’ášá¶á€áŸ‹ Â»</button>
                </form>
            </div>
        </section>


        <section id="payment-page" class="page-section">
            <div class="page-container" style="max-width: 450px;">
                <h2>ğŸ’° á”á‰áŸ’á…á”áŸ‹á€á¶ášá‘á¼á‘á¶ááŸ‹</h2>

                <div class="order-summary">
                    <h3>áŸá„áŸ’ááŸá”á€á¶ášá”á‰áŸ’á‡á¶á‘á·á‰</h3>
                    <p>á áŸ’á‚áŸá˜: <span id="summary-game"></span></p>
                    <p>Player ID: <span id="summary-id"></span></p>
                    <p>á‘áŸ†á“á·á‰: <span id="summary-item"></span></p>
                    <div class="total-price">áá˜áŸ’á›áŸƒáŸášá»á”: <span id="summary-price-khr"></span><br>
                                            (<span id="summary-price-usd"></span>)</div>
                </div>

                <h3>á‡áŸ’ášá¾áŸášá¾áŸáœá·á’á¸á‘á¼á‘á¶ááŸ‹</h3>
                <form id="payment-form" onsubmit="return false;">
                    
                    <label class="payment-option-card" onclick="showQRDisplay('ABA')">
                        <input type="radio" name="payment_method" value="aba" required>
                        <span class="payment-name">ABA PayWay (USD/KHR)</span>
                        <img src="https://via.placeholder.com/50x30?text=ABA" alt="ABA Logo" class="payment-logo">
                    </label>
                    
                    <label class="payment-option-card" onclick="showQRDisplay('Wing')">
                        <input type="radio" name="payment_method" value="wing" required>
                        <span class="payment-name">Wing Money (KHR/USD)</span>
                        <img src="https://via.placeholder.com/50x30?text=Wing" alt="Wing Logo" class="payment-logo">
                    </label>

                    <button type="button" class="proceed-btn" onclick="checkSelectedPayment()">á”á“áŸ’áá‘áŸ…á€á¶á“áŸ‹ QR Payment</button>
                </form>

                <div id="qr-display-container" class="qr-display">
                    <p class="qr-instruction">ğŸ‘‰ áŸá¼á˜áŸáŸ’á€áŸá“ KHQR áá¶á„á€áŸ’ášáŸ„á˜ ášá½á…á…á»á… "á”á‰áŸ’á‡á¶á€áŸ‹á€á¶ášá”á„áŸ‹á”áŸ’ášá¶á€áŸ‹"</p>
                    <p>á…áŸ†á“á½á“ááŸ’ášá¼áœá”á„áŸ‹: <strong id="qr-amount-usd"></strong></p>
                                        <button class="qr-confirm-btn" onclick="finishPayment()">á”á‰áŸ’á‡á¶á€áŸ‹á€á¶ášá”á„áŸ‹á”áŸ’ášá¶á€áŸ‹</button>
                </div>

            </div>
        </section>

    </main>

    <footer>
        <p>&copy; 2024 Top Up Service.</p>
    </footer>

    <script>
        // á¢ááŸ’ášá¶á”áŸ’áá¼ášá”áŸ’ášá¶á€áŸ‹á‚áŸ†ášá¼
        const USD_RATE = 4000; 

        let currentUser = "User123";
        let currentGame = {}; 
        let currentSocialPlatform = '';
        let currentOrder = {}; // áŸá˜áŸ’ášá¶á”áŸ‹ášá€áŸ’áŸá¶á‘á»á€á–áŸááŸŒá˜á¶á“ Order

        // á‘á·á“áŸ’á“á“áŸá™á‘áŸ†á“á·á‰ (á”á„áŸ’á€á¾á“á‡á˜áŸ’ášá¾áŸ $1 - $100. áá˜áŸ’á›áŸƒ 1 USD = 4000 KHR)
        const GAME_ITEMS = {
            'MLBB': { currency: 'á–áŸá‡áŸ’áš', id_label: 'Player ID á“á·á„ Zone ID', items: [{count: 86, price: 4000}, {count: 172, price: 7900}, {count: 344, price: 15600}, {count: 1380, price: 60000}, {count: 4000, price: 180000}, {count: 12000, price: 400000}] },
            'PUBG': { currency: 'UC', id_label: 'Player ID', items: [{count: 60, price: 4000}, {count: 300, price: 16000}, {count: 600, price: 30000}, {count: 1500, price: 75000}, {count: 3000, price: 150000}, {count: 12000, price: 550000}] },
            'FF': { currency: 'á–áŸá‡áŸ’áš', id_label: 'Player ID', items: [{count: 100, price: 4000}, {count: 300, price: 12000}, {count: 500, price: 20000}, {count: 1000, price: 40000}, {count: 2500, price: 90000}, {count: 11500, price: 350000}] },
            'HOK': { currency: 'á€á¶á€áŸ‹', id_label: 'Player ID', items: [{count: 100, price: 5000}, {count: 500, price: 25000}] },
            '8BP': { currency: 'Cash', id_label: 'Player ID', items: [{count: 10, price: 3000}, {count: 50, price: 14000}] }
        };

        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            const page = document.getElementById(pageId);
            if(page) {
                page.style.display = 'block';
            }
            window.scrollTo(0, 0); 
            // á›á¶á€áŸ‹ QR Display ášá¶á›áŸ‹á–áŸá›á”áŸ’áá¼ášá‘áŸ†á–áŸáš
            document.getElementById('qr-display-container').style.display = 'none';
            document.querySelector('.proceed-btn').style.display = 'block'; // á”á„áŸ’á á¶á‰á”áŸŠá¼áá»á„á’á˜áŸ’á˜áá¶áœá·á‰
        }
        
        function showSocialLoginForm(platform) {
            currentSocialPlatform = platform;
            document.getElementById('social-login-title').textContent = `ğŸ”‘ á”áŸ†á–áŸá‰á‚áá“á¸ ${platform}`;
            document.getElementById('social-label').textContent = (platform === 'Facebook' ? 'Email á¬ á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘' : 'Email');
            showPage('social-login-form-page');
        }

        function completeLogin(method) {
            document.getElementById('header-user-status').textContent = `ğŸ‘‹ áŸá½áŸáŸ’áá¸, ${currentUser}`;
            showPage('game-selection-page');
            console.log(`Login áá¶á˜: ${method} - Success`);
        }
        
        function selectGame(name, code) {
            currentGame.name = name;
            currentGame.code = code;
            
            const gameData = GAME_ITEMS[code];
            
            document.getElementById('topup-title').textContent = `ğŸ’ á”á‰áŸ’á…á¼á›áŸá˜áŸ’ášá¶á”áŸ‹ ${name}`;
            document.getElementById('id-label').textContent = gameData.id_label + ':';
            document.getElementById('currency-label').textContent = gameData.currency;
            document.getElementById('zone-id-group').style.display = (code === 'MLBB' ? 'block' : 'none');
            
            const itemContainer = document.getElementById('item-selection-options');
            itemContainer.innerHTML = ''; 
            
            gameData.items.forEach(item => {
                const itemValue = `${item.count}|${item.price}`;
                const usdPrice = (item.price / USD_RATE).toFixed(2);
                
                const itemHTML = `
                    <label class="item-card">
                        <input type="radio" name="item_selection" value="${itemValue}" required>
                        <div class="item-details">
                            <span class="diamond-count">${item.count.toLocaleString()} ${gameData.currency}</span>
                            <span class="price">${item.price.toLocaleString()} KHR ($${usdPrice})</span>
                        </div>
                    </label>
                `;
                itemContainer.innerHTML += itemHTML;
            });
            
            showPage('topup-page');
        }

        function proceedToPayment() {
            const playerId = document.getElementById('player_id').value;
            const itemElement = document.querySelector('input[name="item_selection"]:checked');
            
            if (!itemElement || !playerId) {
                alert("áŸá¼á˜á”áŸ†á–áŸá‰ ID á áŸ’á‚áŸá˜ á“á·á„á‡áŸ’ášá¾áŸášá¾áŸá…áŸ†á“á½á“á‘áŸ†á“á·á‰!");
                return false;
            }

            const [count, price_khr] = itemElement.value.split('|');
            const price_usd = (parseInt(price_khr) / USD_RATE).toFixed(2);
            const currency = GAME_ITEMS[currentGame.code].currency;
            const zoneId = currentGame.code === 'MLBB' ? document.getElementById('zone_id').value : '';

            // ášá€áŸ’áŸá¶á‘á»á€ Order
            currentOrder = {
                game: currentGame.name,
                id: playerId,
                zone: zoneId,
                item_count: parseInt(count),
                item_currency: currency,
                price_khr: parseInt(price_khr),
                price_usd: parseFloat(price_usd)
            };

            // Update Summary
            document.getElementById('summary-game').textContent = currentOrder.game;
            document.getElementById('summary-id').textContent = currentOrder.id + (currentOrder.zone ? ` (Zone: ${currentOrder.zone})` : '');
            document.getElementById('summary-item').textContent = `${currentOrder.item_count.toLocaleString()} ${currentOrder.item_currency}`;
            document.getElementById('summary-price-khr').textContent = `${currentOrder.price_khr.toLocaleString()} KHR`;
            document.getElementById('summary-price-usd').textContent = `$${currentOrder.price_usd}`;

            showPage('payment-page');
            return false;
        }

        function checkSelectedPayment() {
            const selected = document.querySelector('input[name="payment_method"]:checked');
            if (selected) {
                showQRDisplay(selected.value);
            } else {
                alert("áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸáœá·á’á¸á‘á¼á‘á¶ááŸ‹áá¶á˜á½á™!");
            }
        }

        function showQRDisplay(method) {
            // áŸá˜áŸ’ášá¶á”áŸ‹á‚áŸ†ášá¼ á™á¾á„á‚áŸ’ášá¶á“áŸ‹ááŸ‚á”á„áŸ’á á¶á‰ QR ááŸ‚á˜á½á™á”áŸ‰á»ááŸ’ááŸ„áŸ‡
            document.getElementById('qr-amount-usd').textContent = `$${currentOrder.price_usd}`;
            document.getElementById('qr-display-container').style.display = 'block';
            document.querySelector('.proceed-btn').style.display = 'none'; // á›á¶á€áŸ‹á”áŸŠá¼áá»á„á”á“áŸ’á
        }
        
        function finishPayment() {
            alert(`âœ… á”áŸ’ášáá·á”ááŸ’áá·á€á¶ášá”á¶á“á‡áŸ„á‚á‡áŸá™! á›á»á™ $${currentOrder.price_usd} á”á¶á“á”á„áŸ‹áŸá˜áŸ’ášá¶á”áŸ‹ Order ID: MOCKUP12345`);
            showPage('game-selection-page');
        }
    </script>
</body>
</html>
